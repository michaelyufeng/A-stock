# =============================================================================
# A股量化交易系统 - 风险管理配置文件
# =============================================================================
# 说明: 本文件定义完整的风险控制规则，包括仓位管理、交易限制、止损止盈等
# 重要性: 风险管理是量化交易的核心，关系到资金安全
# 详细文档: docs/CONFIGURATION_GUIDE.md
# =============================================================================

# -----------------------------------------------------------------------------
# 仓位管理 - 控制资金分配，防止过度集中
# -----------------------------------------------------------------------------
position:
  # 单一持仓限制 - 防止"一股定乾坤"
  max_single_position: 0.20            # 单股最大仓位20% (范围: 0.10-0.25)
                                       # 建议: 10万以下用0.25, 100万以上用0.15

  # 行业集中度限制 - 分散行业风险
  max_sector_exposure: 0.30            # 单一行业最大30% (范围: 0.25-0.35)
                                       # 避免行业黑天鹅事件造成重大损失

  # 总仓位限制 - 保留现金应对机会和风险
  max_total_position: 0.95             # 总仓位最大95% (范围: 0.85-0.95)
                                       # 建议保留5-15%现金

  # 最小建仓金额 - 避免仓位碎片化
  min_position_value: 10000            # 最小建仓1万元 (范围: 5000-50000)
                                       # 低于此金额，交易成本占比过高

# -----------------------------------------------------------------------------
# 交易限制 - 过滤高风险股票，规范交易行为
# -----------------------------------------------------------------------------
trade_restrictions:
  # --- 股票质量筛选 ---
  禁止ST股: true                        # 禁止ST、*ST等特别处理股票 (强烈建议: true)
                                       # ST股涨跌幅限制5%，且有退市风险

  禁止退市风险股: true                  # 禁止有退市警示的股票 (强烈建议: true)

  min_listing_days: 30                 # 最少上市天数 (范围: 30-90)
                                       # 避免次新股，上市初期波动大且信息不对称

  # --- 流动性要求 ---
  min_market_cap: 2000000000           # 最小市值20亿 (范围: 10-50亿)
                                       # 小市值股票流动性差，易被操纵

  min_daily_volume: 10000000           # 最小日成交额1000万 (范围: 500-5000万)
                                       # 确保能顺利买卖，避免流动性风险

  # --- A股特色限制 ---
  avoid_continuous_limit_up: true      # 避免连续涨停股 (建议: true)
                                       # 追高风险大，容易买在高位

  avoid_continuous_limit_down: true    # 避免连续跌停股 (建议: true)
                                       # 接飞刀风险大，可能存在重大利空

  max_continuous_limit: 3              # 最多允许的连续涨跌停天数 (范围: 2-5)
                                       # 超过此天数的股票不买入

# -----------------------------------------------------------------------------
# 止损配置 - 控制单笔交易最大损失
# -----------------------------------------------------------------------------
stop_loss:
  enabled: true                        # 是否启用止损 (必须: true, 止损是生存之本)

  # 止损方式选择:
  # - fixed: 固定比例止损，简单明确
  # - trailing: 移动止损，盈利后锁定利润
  # - atr: 基于ATR的动态止损，适应波动
  method: "fixed"                      # 止损方式 (可选: fixed/trailing/atr)

  # --- 各类止损参数 ---
  fixed_ratio: 0.08                    # 固定止损8% (范围: 0.05-0.15)
                                       # 短线: 5-8%, 中线: 8-12%, 长线: 10-20%

  trailing_ratio: 0.05                 # 移动止损5% (范围: 0.03-0.08)
                                       # 从最高点回撤此比例时止损

  atr_multiplier: 2.0                  # ATR倍数 (范围: 1.5-3.0)
                                       # 止损价 = 入场价 - ATR * atr_multiplier

# -----------------------------------------------------------------------------
# 止盈配置 - 锁定利润，落袋为安
# -----------------------------------------------------------------------------
take_profit:
  enabled: true                        # 是否启用止盈 (建议: true)

  # 止盈方式选择:
  # - fixed: 固定比例止盈
  # - dynamic: 动态止盈 (根据市场情况调整)
  method: "fixed"                      # 止盈方式 (可选: fixed/dynamic)

  fixed_ratio: 0.15                    # 固定止盈15% (范围: 0.10-0.50)
                                       # 盈亏比建议≥1.5:1 (止盈/止损 ≥ 1.5)

  # --- 分批止盈策略 (推荐开启) ---
  partial_take_profit:
    enabled: true                      # 是否启用分批止盈 (建议: true)

    first_target: 0.10                 # 第一目标10% (范围: 0.08-0.15)
                                       # 达到此盈利时，减仓一部分锁定利润

    first_size: 0.50                   # 第一次减仓50% (范围: 0.30-0.70)
                                       # 剩余仓位继续持有，追求更大收益

# -----------------------------------------------------------------------------
# A股特色风控 - 根据A股市场特殊规则设置
# -----------------------------------------------------------------------------
a_share_specific:
  # --- T+1交易制度 (A股固定规则) ---
  t1_settlement: true                  # T+1制度 (固定: true, 不可修改)
                                       # 当天买入的股票，次日才能卖出
                                       # 影响: 需更谨慎的买入决策，无法日内止损

  # --- 涨跌停检查 ---
  check_limit_price: true              # 是否检查涨跌停 (必须: true)
                                       # 涨跌停时无法成交，需特殊处理

  # --- 涨跌停处理策略 ---
  limit_up_action: "hold"              # 涨停时的处理 (可选: hold/sell)
                                       # hold: 继续持有，等待继续上涨
                                       # sell: 涨停打开时卖出

  limit_down_action: "hold"            # 跌停时的处理 (可选: hold/emergency_sell)
                                       # hold: 继续持有，等待企稳
                                       # emergency_sell: 跌停打开时紧急卖出 (重大利空)

  # --- 特殊时段控制 ---
  avoid_before_holiday: false          # 节前避险 (可选: true/false)
                                       # true: 长假前1-2天不买入
                                       # 原因: 节假日风险，市场通常偏谨慎

  avoid_year_end: false                # 年末避险 (可选: true/false)
                                       # true: 12月下旬不买入
                                       # 原因: 机构调仓、考核压力

# -----------------------------------------------------------------------------
# 风险预警 - 多级预警机制，及时发现风险
# -----------------------------------------------------------------------------
alerts:
  # --- 仓位集中度预警 ---
  position_concentration:
    warning: 0.15                      # 单一持仓15%时黄色预警 (范围: 0.12-0.18)
    critical: 0.20                     # 单一持仓20%时红色预警 (范围: 0.18-0.22)
                                       # 超过critical需立即调整

  # --- 回撤预警 (从最高点回撤) ---
  drawdown:
    warning: 0.05                      # 5%回撤时黄色预警 (范围: 0.03-0.08)
    critical: 0.10                     # 10%回撤时红色预警 (范围: 0.08-0.15)
                                       # 超过critical需检查策略和仓位

  # --- 波动率预警 (年化波动率) ---
  volatility:
    warning: 0.30                      # 30%波动率时黄色预警
    critical: 0.50                     # 50%波动率时红色预警
                                       # 高波动意味着高风险

# -----------------------------------------------------------------------------
# 交易频率限制 - 防止过度交易
# -----------------------------------------------------------------------------
trading_limits:
  # 交易次数限制
  max_trades_per_day: 5                # 每日最多5次交易 (范围: 3-10)
                                       # 过度交易导致高成本、情绪化决策

  max_trades_per_week: 15              # 每周最多15次交易 (范围: 10-30)
                                       # 控制整体换手率

  # 持仓时间限制
  min_holding_period: 1                # 最短持仓1天 (固定: 1, 受T+1限制)

  # 冷却期设置
  cooling_period: 5                    # 同一股票冷却期5天 (范围: 3-10)
                                       # 卖出后需等待N天才能再次买入
                                       # 避免反复交易同一股票

# =============================================================================
# 风险管理原则:
# 1. 控制仓位 - 不要把鸡蛋放在一个篮子里
# 2. 严格止损 - 保护本金是第一要务
# 3. 分散投资 - 个股、行业、策略都要分散
# 4. 循序渐进 - 先小仓试验，确认有效再放大
# 5. 持续监控 - 定期检查风险指标，及时调整
#
# 风险等级建议:
# - 新手/保守型: max_single_position≤15%, max_total_position≤80%, stop_loss=10-15%
# - 有经验/稳健型: max_single_position≤20%, max_total_position≤85%, stop_loss=8-12%
# - 专业/激进型: max_single_position≤25%, max_total_position≤95%, stop_loss=5-8%
#
# 详细说明请参考: docs/CONFIGURATION_GUIDE.md
# =============================================================================
